!function(a){"use strict";var b=function(b,c,d){return this.el=b,this.$el=a(b),this.opts=c,this.uuid=this.$el.attr("id")?this.$el.attr("id"):d,this.open={},this.init(),this};b.prototype={init:function(){var b=this;b.opts.save&&b._load(),b.$el.find("ul").each(function(c){var d=a(this);d.data("index",c),b.opts.save&&b.open.hasOwnProperty(c)?(d.parent().addClass(b.opts.openClass),d.show()):d.parent().hasClass(b.opts.openClass)?(d.show(),this.open[c]=1):d.hide()});var c=b.$el.find("li:has(ul) > a");b.opts.caret&&c.append(b.opts.caret),c.click(function(c){c.preventDefault();var d=a(this).next(),e=d.is(":visible");b._toggle(d,!e),b.opts.save&&b._save()})},_toggle:function(b,c){var d=this,e=b.data("index");if(c){if(b.parent().addClass(d.opts.openClass),b.slideDown(d.opts.slide),d.open[e]=1,d.opts.accordion){var f={};f[e]=1,b.parent().parents("ul").each(function(){var b=a(this).data("index");f[b]=1,d.open[b]=1}),d.$el.find("ul:visible").each(function(){var b=a(this);f.hasOwnProperty(b.data("index"))||d._toggle(b,!1)})}}else b.parent().removeClass(d.opts.openClass),b.slideUp(d.opts.slide),this.open[e]=0},_save:function(){var b={};for(var d in this.open)1===this.open[d]&&(b[d]=1);c[this.uuid]=b,a.cookie(this.opts.cookie.name,JSON.stringify(c),this.opts.cookie)},_resetCookie:function(){c[this.uuid]={}},_load:function(){if(null===c){var b=a.cookie(this.opts.cookie.name);c=b?JSON.parse(b):{}}this.open=c.hasOwnProperty(this.uuid)?c[this.uuid]:{}},collapse:function(){var b=this;b.$el.find("ul:visible").each(function(){b._toggle(a(this),!1)}),b.opts.save&&b._save()},expand:function(){var b=this;b.$el.find("ul").each(function(){b._toggle(a(this),!0)}),b.opts.save&&b._save()}};var c=null,d={caret:'<span class="caret"></span>',accordion:!1,openClass:"open",save:!0,cookie:{name:"navgoco",expires:!1,path:"/"},slide:{duration:400,easing:"swing"}};a.fn.navgoco=function(c){var e="string"==typeof c;return e||(c=a.extend({},d,c||{}),a.cookie||(c.save=!1)),this.each(function(d){var f=a(this),g=f.data("navgoco");e&&g?g[c]():g||f.data("navgoco",new b(this,c,d))})}}(jQuery);